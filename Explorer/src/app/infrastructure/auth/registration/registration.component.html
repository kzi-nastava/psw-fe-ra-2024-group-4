<div>
    <form [formGroup]="registrationForm" (ngSubmit)="register()" class="form-style">
        <h1>REGISTRATION FORM</h1>
        
        <!-- Ime i prezime -->
        <div class="two-inputs">
            <mat-form-field appearance="fill" floatLabel="auto">
                <mat-label>Name</mat-label>
                <input matInput type="text" formControlName="name" placeholder="Enter your name">
                <mat-error *ngIf="registrationForm.get('name')?.invalid && registrationForm.get('name')?.dirty">
                    This field is required
                </mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill" floatLabel="auto">
                <mat-label>Surname</mat-label>
                <input matInput type="text" formControlName="surname" placeholder="Enter your surname">
                <mat-error *ngIf="registrationForm.get('surname')?.invalid && registrationForm.get('surname')?.dirty">
                    This field is required
                </mat-error>
            </mat-form-field>
        </div>
        
        <!-- Korisničko ime -->
        <div class="one-input">
            <mat-form-field appearance="fill" floatLabel="auto">
                <mat-label>Username</mat-label>
                <input matInput type="text" formControlName="username" placeholder="Enter your username" required>
                <mat-error *ngIf="registrationForm.get('username')?.invalid && registrationForm.get('username')?.dirty">
                    This field is required
                </mat-error>
            </mat-form-field>
        </div>

        <!-- Email -->
        <div class="one-input">
            <mat-form-field appearance="fill" floatLabel="auto">
                <mat-label>Email</mat-label>
                <input matInput type="email" formControlName="email" placeholder="Ex: john@example.com">
                <mat-error *ngIf="registrationForm.get('email')?.hasError('required') && registrationForm.get('email')?.dirty">
                    This field is required
                </mat-error>
                <mat-error *ngIf="registrationForm.get('email')?.hasError('email') && registrationForm.get('email')?.dirty">
                    Enter valid email
                </mat-error>
            </mat-form-field>
        </div>

        <!-- Lozinka i potvrda lozinke -->
        <div class="one-input">
            <mat-form-field appearance="fill" floatLabel="auto">
                <mat-label>Password</mat-label>
                <input matInput type="password" formControlName="password" placeholder="Enter your password" required>
                <mat-error *ngIf="registrationForm.get('password')?.hasError('required') && registrationForm.get('password')?.dirty">
                    This field is required
                </mat-error>
                <mat-error *ngIf="registrationForm.get('password')?.hasError('minlength') && registrationForm.get('password')?.dirty">
                    Password must be at least 8 characters long
                </mat-error>
            </mat-form-field>
        </div>
        <div class="one-input">
            <mat-form-field appearance="fill" floatLabel="auto">
                <mat-label>Confirm Password</mat-label>
                <input 
                    matInput 
                    type="password" 
                    formControlName="confirmPassword" 
                    placeholder="Confirm your password" 
                    required>
                <mat-icon *ngIf="registrationForm.hasError('passwordMismatch') && registrationForm.get('confirmPassword')?.dirty">close</mat-icon>
                <mat-icon *ngIf="!registrationForm.hasError('passwordMismatch') && registrationForm.get('confirmPassword')?.dirty">check</mat-icon>
                <mat-error *ngIf="registrationForm.get('confirmPassword')?.hasError('required') && registrationForm.get('confirmPassword')?.dirty">
                    This field is required
                </mat-error>
                <mat-error *ngIf="registrationForm.hasError('passwordMismatch') && registrationForm.get('confirmPassword')?.dirty">
                    Passwords do not match
                </mat-error>
            </mat-form-field>
            
        </div>

        <!-- Profilna slika -->
        <div class="one-input">
            <label>Profile picture</label>
            <input type="file" (change)="onFileSelected($event)" />
            <mat-error *ngIf="registrationForm.get('profilePicture')?.touched">
                Image is required.
            </mat-error>
        </div>

        <!-- Submit dugme -->
        <div class="field">
            <button 
                color="primary" 
                type="submit" 
                mat-raised-button 
                class="submit-button" 
                [disabled]="registrationForm.invalid || registrationForm.hasError('passwordMismatch')">
                Register
            </button>
        </div>
    </form>
</div>
